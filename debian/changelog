wmfbackups (0.7+deb11u1) bullseye; urgency=medium

  * INCOMPATIBLE CHANGE: make the remte backups command line
    now have a compulsory argument (sections). To recover the
    previous behaviour, now one has to run remote-backup-mariadb all
    This is to prevent accidental test runs by just running the
    executable, without arguments.
    This also allows rerunning only some backups easily, by running
    'remote-backup-mariadb s1 s2 x1'
  * INCOMPATIBLE CHANGE: return 0 (success error code) as long as
    no config parsing or command line error, or any other unacaught
    exception (such as control-c) argument happens, independently
    of the exit status of the backups. This is because a single
    backup failure caused the systemd timer running this process to
    alarm, causing alert fatigue. There is already a check process
    with proper time thresholds- focus on that and logging reading
    for debugging.
  * Unit tests for mariabackup & wmfbackups added
  * Now remote backups are retried (only once) after the full batch
    for that destination server is finished. This will prevent
    backups failing for one-time flukes such as temporary network
    issues or server unavailability
  * A few improvements on logging: Now print the list of sections
    that failed (even after retrying) at the end, for easier manual
    log monitoring. This is in addition to existing db metadata
    monitoring.
  * Check that xtrabackup --prepare is using the same version (or a
    compatible one) as the original source backup server. For now,
    it will fail unless:
     - Vendor (e.g. MariaDB) are the same
     - Major version (e.g. 10.4) are the same
     - xtrabackup minor are the same or higher than server
  * Improve check_mariadb_backups.py by adding tests and a clearer
    error output
  * Fix warning on newer python versions that suggested to use yaml
    safeloader to parse config files (which also will be safer)
  * Now all command line executables and file formats have man pages

 -- jynus <jcrespo@wikimedia.org>  Thu, 17 Mar 2022 11:03:16 +0100

wmfbackups (0.6+deb11u1) bullseye; urgency=medium

  * Several bug fixes and quality of life fixes
  * Clearer logging
  * Fixes uncaught exception when there were errors on the log
  * Bullseye support

 -- jynus <jcrespo@wikimedia.org>  Tue, 01 Mar 2022 11:49:33 +0100

wmfbackups (0.5+deb10u2) buster; urgency=medium

  * Fix xtrabackup issues with s3 T281094

 -- Jaime Crespo <jcrespo@wikimedia.org>  Tue, 27 Apr 2021 10:36:23 +0200

wmfbackups (0.4+deb10u2) buster; urgency=medium

  * Fixed packaging bug

 -- Jaime Crespo <jcrespo@wikimedia.org>  Wed, 25 Nov 2020 12:24:46 +0100

wmfbackups (0.4+deb10u1) buster; urgency=medium

  * Move utility function dependencies to wmfbackups/util
  * Prevent password logging when using remote backups
  * Add new option stats-file to read passwords locally

 -- Jaime Crespo <jcrespo@wikimedia.org>  Tue, 24 Nov 2020 12:44:38 +0100

wmfbackups (0.3+deb10u1) buster; urgency=medium

  * Optimize schedule of remote backups
  * Misc fixes

 -- Jaime Crespo <jcrespo@wikimedia.org>  Thu, 24 Sep 2020 08:49:35 +0200

wmfbackups (0.2+deb10u1) buster; urgency=medium

  * Fix packaging issue and dependencies for wmfbackups-check
  * Fix backup-mariadb path from remote calling
  * Make package depend on wmfmariadbpy>=0.5

 -- Jaime Crespo <jcrespo@wikimedia.org>  Tue, 22 Sep 2020 12:57:52 +0200
wmfbackups (0.1) stretch; urgency=medium

  * Initial packaging.

 -- Jaime Crespo <jcrespo@wikimedia.org>  Thu, 17 Sep 2020 10:23:14 +0200

